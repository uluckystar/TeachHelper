<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•ç™»å½•ä¸­æ–‡ç”¨æˆ·åéªŒè¯</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-item {
            margin: 15px 0;
            padding: 15px;
            border-left: 4px solid #409eff;
            background-color: #f0f9ff;
        }
        .success {
            border-left-color: #67c23a;
            background-color: #f0f9ff;
        }
        .error {
            border-left-color: #f56c6c;
            background-color: #fef0f0;
        }
        h1 {
            color: #333;
            text-align: center;
            border-bottom: 2px solid #409eff;
            padding-bottom: 10px;
        }
        h2 {
            color: #606266;
            margin-top: 30px;
        }
        .test-input {
            padding: 10px;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            width: 300px;
            margin-right: 10px;
        }
        .test-button {
            padding: 10px 20px;
            background-color: #409eff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .result {
            margin-top: 10px;
            font-weight: bold;
        }
        .success .result {
            color: #67c23a;
        }
        .error .result {
            color: #f56c6c;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ ç™»å½•ä¸­æ–‡ç”¨æˆ·åéªŒè¯ä¿®å¤æµ‹è¯•</h1>
    
    <div class="test-container">
        <h2>ğŸ“ æµ‹è¯•è¯´æ˜</h2>
        <p>æœ¬é¡µé¢æµ‹è¯•ç™»å½•é¡µé¢ä¸­æ–‡ç”¨æˆ·åéªŒè¯çš„ä¿®å¤æ•ˆæœã€‚ä¿®å¤ååº”è¯¥æ”¯æŒï¼š</p>
        <ul>
            <li>âœ… ä¸­æ–‡ç”¨æˆ·åæœ€å°‘2ä¸ªå­—ç¬¦ï¼ˆå¦‚ï¼šç‹å¹³ï¼‰</li>
            <li>âœ… è‹±æ–‡ç”¨æˆ·åæœ€å°‘3ä¸ªå­—ç¬¦ï¼ˆå¦‚ï¼šabcï¼‰</li>
            <li>âœ… æ··åˆç”¨æˆ·ååˆç†é•¿åº¦ï¼ˆå¦‚ï¼šå¼ sanï¼‰</li>
            <li>âŒ ä¿ç•™è¯éªŒè¯</li>
        </ul>
    </div>

    <div class="test-container">
        <h2>ğŸ§ª ç”¨æˆ·åéªŒè¯æµ‹è¯•</h2>
        <p>è¾“å…¥ç”¨æˆ·åè¿›è¡Œæµ‹è¯•ï¼š</p>
        <input type="text" id="usernameInput" class="test-input" placeholder="è¾“å…¥ç”¨æˆ·åè¿›è¡Œæµ‹è¯•" />
        <button onclick="testUsername()" class="test-button">æµ‹è¯•éªŒè¯</button>
        <div id="testResult"></div>
    </div>

    <div class="test-container">
        <h2>ğŸ“Š é¢„è®¾æµ‹è¯•ç”¨ä¾‹</h2>
        <div id="testCases"></div>
    </div>

    <script>
        // æ¨¡æ‹Ÿç™»å½•éªŒè¯å‡½æ•°ï¼ˆä¸å®é™…ä»£ç ä¸€è‡´ï¼‰
        const validateRegistration = {
            username: (username) => {
                if (!username) {
                    return 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'
                }
                
                // æ£€æŸ¥å­—ç¬¦æ˜¯å¦åˆæ³•ï¼ˆä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼‰
                const validCharPattern = /^[\u4e00-\u9fff\u3400-\u4dbfa-zA-Z0-9_]+$/
                if (!validCharPattern.test(username)) {
                    return 'ç”¨æˆ·ååªèƒ½åŒ…å«ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—å’Œä¸‹åˆ’çº¿'
                }
                
                // æ£€æŸ¥é•¿åº¦ï¼šä¸­æ–‡å­—ç¬¦2-50ä¸ªï¼Œè‹±æ–‡å­—ç¬¦3-50ä¸ª
                const chineseCharCount = (username.match(/[\u4e00-\u9fff\u3400-\u4dbf]/g) || []).length
                const totalLength = username.length
                
                if (totalLength > 50) {
                    return 'ç”¨æˆ·åé•¿åº¦ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦'
                }
                
                // å¦‚æœåŒ…å«ä¸­æ–‡å­—ç¬¦ï¼Œæœ€å°‘2ä¸ªå­—ç¬¦
                if (chineseCharCount > 0) {
                    if (totalLength < 2) {
                        return 'åŒ…å«ä¸­æ–‡çš„ç”¨æˆ·åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦'
                    }
                } else {
                    // çº¯è‹±æ–‡æ•°å­—ç»„åˆï¼Œæœ€å°‘3ä¸ªå­—ç¬¦
                    if (totalLength < 3) {
                        return 'è‹±æ–‡ç”¨æˆ·åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦'
                    }
                }
                
                // æ£€æŸ¥ä¿ç•™è¯
                const reservedWords = ['admin', 'root', 'system', 'administrator', 'teacher', 'student', 'ç®¡ç†å‘˜', 'æ•™å¸ˆ', 'å­¦ç”Ÿ', 'ç³»ç»Ÿ']
                const lowerUsername = username.toLowerCase()
                for (const reserved of reservedWords) {
                    if (lowerUsername === reserved.toLowerCase() || username === reserved) {
                        return 'ç”¨æˆ·åä¸èƒ½ä½¿ç”¨ä¿ç•™è¯'
                    }
                }
                
                return null
            }
        }

        function testUsername() {
            const input = document.getElementById('usernameInput')
            const result = document.getElementById('testResult')
            const username = input.value
            
            const error = validateRegistration.username(username)
            
            if (error) {
                result.innerHTML = `<div class="result" style="color: #f56c6c;">âŒ ${error}</div>`
            } else {
                result.innerHTML = `<div class="result" style="color: #67c23a;">âœ… ç”¨æˆ·åéªŒè¯é€šè¿‡</div>`
            }
        }

        function runTestCases() {
            const testCases = [
                { input: 'ç‹å¹³', expected: 'success', description: '2ä¸ªä¸­æ–‡å­—ç¬¦' },
                { input: 'å¼ ä¸‰ä¸°', expected: 'success', description: '3ä¸ªä¸­æ–‡å­—ç¬¦' },
                { input: 'æ', expected: 'error', description: '1ä¸ªä¸­æ–‡å­—ç¬¦ï¼ˆåº”è¯¥å¤±è´¥ï¼‰' },
                { input: 'abc', expected: 'success', description: '3ä¸ªè‹±æ–‡å­—ç¬¦' },
                { input: 'ab', expected: 'error', description: '2ä¸ªè‹±æ–‡å­—ç¬¦ï¼ˆåº”è¯¥å¤±è´¥ï¼‰' },
                { input: 'å¼ san', expected: 'success', description: 'ä¸­è‹±æ··åˆ' },
                { input: 'user123', expected: 'success', description: 'è‹±æ–‡+æ•°å­—' },
                { input: 'ç‹_ping', expected: 'success', description: 'ä¸­æ–‡+ä¸‹åˆ’çº¿+è‹±æ–‡' },
                { input: 'admin', expected: 'error', description: 'ä¿ç•™è¯ï¼ˆåº”è¯¥å¤±è´¥ï¼‰' },
                { input: 'ç®¡ç†å‘˜', expected: 'error', description: 'ä¸­æ–‡ä¿ç•™è¯ï¼ˆåº”è¯¥å¤±è´¥ï¼‰' },
                { input: 'user@123', expected: 'error', description: 'åŒ…å«éæ³•å­—ç¬¦@ï¼ˆåº”è¯¥å¤±è´¥ï¼‰' }
            ]

            const container = document.getElementById('testCases')
            container.innerHTML = ''

            testCases.forEach((testCase, index) => {
                const error = validateRegistration.username(testCase.input)
                const isSuccess = !error
                const expectedSuccess = testCase.expected === 'success'
                const passed = isSuccess === expectedSuccess

                const div = document.createElement('div')
                div.className = `test-item ${passed ? 'success' : 'error'}`
                div.innerHTML = `
                    <strong>æµ‹è¯• ${index + 1}: ${testCase.description}</strong><br>
                    è¾“å…¥: "${testCase.input}"<br>
                    ç»“æœ: ${passed ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}<br>
                    ${error ? `é”™è¯¯ä¿¡æ¯: ${error}` : 'éªŒè¯é€šè¿‡'}
                `
                container.appendChild(div)
            })
        }

        // é¡µé¢åŠ è½½æ—¶è¿è¡Œæµ‹è¯•
        window.onload = runTestCases
    </script>
</body>
</html>
