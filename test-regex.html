<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>正则表达式测试</title>
</head>
<body>
    <h1>中文用户名正则表达式测试</h1>
    <script>
        // 当前使用的正则表达式（更新后的）
        const pattern = /^[\u4e00-\u9fff\u3400-\u4dbfa-zA-Z0-9_]{3,50}$/;
        
        // 测试用例
        const testCases = [
            "王平",
            "张三",
            "李四ABC", 
            "测试123",
            "王五_测试",
            "a",  // 太短
            "王@平", // 特殊字符
        ];
        
        console.log("正则表达式:", pattern);
        console.log("测试结果:");
        
        testCases.forEach(username => {
            const isValid = pattern.test(username);
            console.log(`"${username}": ${isValid ? '✅ 通过' : '❌ 失败'}`);
            
            // 检查每个字符的Unicode范围
            console.log(`  字符详情: ${username.split('').map(char => {
                const code = char.charCodeAt(0);
                const hex = code.toString(16);
                return `${char}(U+${hex.toUpperCase()})`;
            }).join(', ')}`);
        });
        
        // 特别测试"王平"
        console.log("\n特别测试 '王平':");
        const username = "王平";
        console.log(`长度: ${username.length}`);
        console.log(`匹配结果: ${pattern.test(username)}`);
        
        // 测试每个字符是否在中文范围内
        username.split('').forEach((char, index) => {
            const code = char.charCodeAt(0);
            const inRange = code >= 0x4e00 && code <= 0x9fa5;
            console.log(`字符 ${index}: "${char}" (U+${code.toString(16).toUpperCase()}) - ${inRange ? '在' : '不在'}中文范围内`);
        });
    </script>
</body>
</html>
